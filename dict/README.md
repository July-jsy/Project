### 电子词典项目说明

#### 项目概述
本项目是一个基于C语言的电子词典系统，包含客户端和服务器端两部分。客户端通过TCP/IP协议与服务器通信，实现用户注册、登录、单词查询、历史记录查询等功能。服务器端使用SQLite数据库存储用户信息和查询历史记录，并通过多线程处理多个客户端的请求。

#### 项目结构
1. **客户端 (client.c)**
   - 负责与用户交互，发送请求到服务器并接收响应。
   - 主要功能包括：
     - 用户注册 (`cli_register`)
     - 用户登录 (`cli_login`)
     - 单词查询 (`cli_search`)
     - 查询历史记录 (`cli_history`)
     - 主菜单 (`firstmenu`, `secondmenu`)

2. **服务器端 (server.c)**
   - 负责处理客户端请求，与SQLite数据库交互，并返回结果。
   - 主要功能包括：
     - 用户注册 (`ser_register`)
     - 用户登录 (`ser_login`)
     - 单词查询 (`ser_search`)
     - 查询历史记录 (`ser_history`)
     - 数据库初始化 (`init_sqlite`)
     - 多线程处理客户端请求 (`server`)

#### 功能模块

1. **用户注册**
   - 客户端：用户输入用户名和密码，发送注册请求到服务器。
   - 服务器：检查用户名是否已存在，若不存在则将用户信息插入数据库，返回注册结果。

2. **用户登录**
   - 客户端：用户输入用户名和密码，发送登录请求到服务器。
   - 服务器：验证用户名和密码，返回登录结果。

3. **单词查询**
   - 客户端：用户输入单词，发送查询请求到服务器。
   - 服务器：在字典文件中查找单词，返回单词释义。若找到单词，则记录查询历史。

4. **查询历史记录**
   - 客户端：用户请求查询历史记录。
   - 服务器：从数据库中获取该用户的历史记录并返回。

5. **数据库管理**
   - 服务器：使用SQLite数据库存储用户信息和查询历史记录。
   - 数据库表结构：
     - `user_info`：存储用户名和密码。
     - `history`：存储用户的查询历史，包括用户名、查询的单词和时间。

#### 主要数据结构
- **MSG结构体**：用于客户端和服务器之间的通信，包含以下字段：
  - `signal`：操作信号（1注册，2登录，3查询单词，4查询历史记录）。
  - `username`：用户名。
  - `passwd`：密码。
  - `wordname`：查询的单词。
  - `data`：单词释义或历史记录。
  - `len`：数据长度。

#### 运行流程
1. **启动服务器**：
   - 初始化SQLite数据库，创建必要的表。
   - 监听客户端连接，为每个客户端创建一个线程处理请求。

2. **启动客户端**：
   - 连接服务器，显示主菜单。
   - 用户选择注册、登录或退出。
   - 登录成功后，进入二级菜单，选择查询单词、查询历史记录或返回上一级。

3. **交互过程**：
   - 客户端发送请求到服务器，服务器处理请求并返回结果。
   - 客户端根据服务器返回的结果显示相应的信息。

#### 编译与运行
1. **编译**：
   - 分别编译客户端和服务器端代码：
     ```bash
     gcc client.c -o client -lpthread -lsqlite3
     gcc server.c -o server -lpthread -lsqlite3
     ```

2. **运行**：
   - 先启动服务器：
     ```bash
     ./server
     ```
   - 再启动客户端：
     ```bash
     ./client
     ```

#### 注意事项
- 确保SQLite数据库文件 `dict.db` 存在，并且字典文件 `/home/linux/dict/dict.txt` 存在且格式正确。
- 服务器和客户端需要在同一网络环境下运行，或者修改IP地址为实际使用的IP。

#### 扩展功能
- **单词联想**：可以根据用户输入的单词前缀，提供可能的单词建议。
- **多用户并发**：服务器已经支持多线程处理，可以同时处理多个客户端的请求。
- **安全性增强**：可以对用户密码进行加密存储，增加安全性。

#### 总结
本项目实现了一个简单的电子词典系统，涵盖了客户端与服务器的通信、数据库操作、多线程处理等关键技术。通过该项目，可以学习到网络编程、数据库操作以及多线程编程的基本知识。
